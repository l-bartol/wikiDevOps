<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="../../../../styles/highlight/styles/base16/bright.min.css">
		<link rel="stylesheet" href="../../../../styles/style.css">
		<script src="../../../../styles/highlight/highlight.min.js"></script>
		<title>Créer un projet Quarkus avec l'interface web code.quarkus.io</title>
	</head>
	<body>
		<script>hljs.highlightAll();</script>
		<h3><a href="index_Quarkus.html">Retour sur le sommaire Quarkus</a></h3>
		<div class="divinfo">
			QUARKUS - CRÉATION DE VOTRE STARTER EN LIGNE</br>
			Sommaire</br>
			<ol>
				<li>Prérequis</li>
				<li>Construire son starter</li>
				<li>Configurer sa future application</li>
				<li>Télécharger le starter</li>
				<li>Installer le starter</li>	
				<li>Créer et Compiler son application</li>
				<li>Tester son application</li>
				<li>Packager son application</li>
				<li>Tester son package</li>
				<li>Gérer en configuration la fiche</li>
			</ol>
			<hr>
			Aide sur les sites suivantes :</br>
			<a href="https://www.youtube.com/watch?v=eiDTdCR1j7I&list=PL6oD2syjfW7ADAkICQr-SQcEqsenVPfqg&index=1" target="_blank">Un starter Quarkus voir : https://www.youtube.com/watch?v=eiDTdCR1j7I&list=PL6oD2syjfW7ADAkICQr-SQcEqsenVPfqg&index=1"</a></br>
			<a href="https://quarkus.io/blog/eclipse-got-quarkused" target="_blank">Visual Sutio et Quarkus voir : https://quarkus.io/blog/eclipse-got-quarkused</a></br>
			<a href="https://quarkus.io/guides/maven-tooling" target="_blank">Maven et Quarkus voir : https://quarkus.io/guides/maven-tooling</a></br>
		</div>
		<div class="divinfo">
			<h4>1. Prérequis</h4>
			Pour un developpement sur PC Windows, les prérequis sont :</br>
			- PowerShell
			- JDK 11+ installé avec JAVA_HOME (Installé avec hotstop OpenJDK11U-jdk_x64_windows_hotspot_11.0.12_7.msi)</br>
			- Apache Maven 3.8.1+</br>
			- Visual Studio utilisé (Avec l'Extension : "Quarkus : Quarkus Tools for Visual Studio Code") dans notre cas</br>
			</br>
			Vérifiez les versions dans une fenêtre powershell :</br>
			- PowerShell : Get-Host | select version
			- JAVA_HOME : $env:JAVA_HOME</br>
			- Java : java -version</br>
			- Maven : mvn --version</br>
			- <a href="../../../../2_Dev/Langages/Java/JavaSE/JavaSE_16.html" target="_blank">Si nécessaire : voir exemple mise en place de l'environnement avec power shell.</a></br>
			Dans ce cas :</br>
			<div class="divcode"><pre>
				<code class="language-bash">Get-Host | select version
Version
-------
5.1.18362.1593

$env:JAVA_HOME
C:\Program Files\Eclipse Foundation\jdk-11.0.12.7-hotspot\

javac -version
java -version
openjdk version "11.0.12" 2021-07-20
OpenJDK Runtime Environment Temurin-11.0.12+7 (build 11.0.12+7)
OpenJDK 64-Bit Server VM Temurin-11.0.12+7 (build 11.0.12+7, mixed mode)

mvn --version
Apache Maven 3.8.1 (05c21c65bdfed0f71a2f2ada8b84da59348c4c5d)
Maven home: C:\Program Files\apache-maven-3.8.1\bin\..
Java version: 11.0.12, vendor: Eclipse Foundation, runtime: C:\Program Files\Eclipse Foundation\jdk-11.0.12.7-hotspot
Default locale: fr_FR, platform encoding: Cp1252
OS name: "windows 10", version: "10.0", arch: "amd64", family: "windows"

GRALL OU PAS ? https://www.infoq.com/fr/articles/Graal-Java-JIT-Compiler/ License Oracle ???
</code>
			</pre></div>
		</div>
		<div class="divinfo">
			<h4>2. Aller sur code.quarkus.io</h4>
			Démarrer votre application Quarkus et découvrir son écosystème d'extensions.</br>
			Explorez le large éventail de technologies avec lesquelles les applications Quarkus peuvent être créées.</br>
			<a href="https://code.quarkus.io/" target="_blank">Aller sur : https://code.quarkus.io/"</a></br>
		</div>
		<div class="divinfo">
			<h4>3. Configurer son application</h4>
			Group : edu.tuto</br>
			Artifact : quarkus-start-with-quarkus-io</br>
			Build tool : Maven</br>
			Version : 1.0.0-SNAPSHOT</br>
			Starter Code : Yes (Pour pouvoir générer une application plus facilement à partir du code par défaut)
			<hr>
			Rechercher et sélectionner les extensions nécessaires, exemple :</br>
			- RESTEasy JAX-RS Cette extension contient un example de code</br>
			"framework point de terminaison REST mettant en œuvre JAX-RS et plus"</br>
		</div>		
		<div class="divinfo">
			<h4>4. Générer son starter</h4>			
			Votre application supersonique subatomique est prête !</br>
			Votre téléchargement devrait commencer sous peu. Si ce n'est pas le cas, veuillez utiliser le lien direct :</br>
			</br>
		<div class="divinfo">
			<h4>5. Installer son starter</h4>
			<div class="divcode"><pre>
			<code class="language-bash">PS> cd ~/Downloads
PS> copy quarkus-start-with-quarkus-io.zip $home/DEV/Quarkus/Projets/quarkus-start-with-quarkus-io.zip
PS> cd $home/DEV/Quarkus/Projets
PS> Expand-Archive quarkus-start-with-quarkus-io.zip -DestinationPath .</code>
			</pre></div>
			- Aller dans le répertoire du projet : PS> cd quarkus-start-with-quarkus-io
			- Lancer Visual Studio : PS> code</br>
			- Se positionner sur le projet : Menu : "File->Open Folder... : $home/DEV/Quarkus/Projets/quarkus-start-with-quarkus-io"</br>
		</div>
		<div class="divinfo">
			<h4>6. Compiler et Lancer</h4>
			- Lancer un terminal : Menu : "Terminal"
			- Compiler...</br>
			<div class="divcode"><pre>
			<code class="language-bash">PS> cd $home/DEV/Quarkus/Projets/quarkus-start-with-quarkus-io
PS> ./mvnw compile quarkus:dev
[INFO] Scanning for projects...
[INFO]
[INFO] --------------- edu.tuto:quarkus-start-with-quarkus-io ---------------
[INFO] Building quarkus-start-with-quarkus-io 1.0.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO]
[INFO] --- quarkus-maven-plugin:2.1.1.Final:generate-code (default) @ quarkus-start-with-quarkus-io ---
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ quarkus-start-with-quarkus-io ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO]
[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ quarkus-start-with-quarkus-io ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 1 source file to C:\Users\userName\DEV\Quarkus\Projets\quarkus-start-with-quarkus-io\target\classes
[INFO]
[INFO] --- quarkus-maven-plugin:2.1.1.Final:dev (default-cli) @ quarkus-start-with-quarkus-io ---
[INFO] Invoking org.apache.maven.plugins:maven-resources-plugin:2.6:testResources @ quarkus-start-with-quarkus-io
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\Users\userName\DEV\Quarkus\Projets\quarkus-start-with-quarkus-io\src\test\resources
[INFO] Invoking org.apache.maven.plugins:maven-compiler-plugin:3.8.1:testCompile @ quarkus-start-with-quarkus-io
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 2 source files to C:\Users\userName\DEV\Quarkus\Projets\quarkus-start-with-quarkus-io\target\test-classes
Listening for transport dt_socket at address: 5005
__  ____  __  _____   ___  __ ____  ______ 
 --/ __ \/ / / / _ | / _ \/ //_/ / / / __/
 -/ /_/ / /_/ / __ |/ , _/ ,  / /_/ /\ \
--\___\_\____/_/ |_/_/|_/_/|_|\____/___/
2021-08-10 17:32:28,529 INFO  [io.quarkus] (Quarkus Main Thread) quarkus-start-with-quarkus-io 1.0.0-SNAPSHOT on JVM (powered by Quarkus 2.1.1.Final) started in 7.046s. Listening on: http://localhost:8080
2021-08-10 17:32:28,534 INFO  [io.quarkus] (Quarkus Main Thread) Profile dev activated. Live Coding activated. 
2021-08-10 17:32:28,536 INFO  [io.quarkus] (Quarkus Main Thread) Installed features: [cdi, resteasy, smallrye-context-propagation]

--
Tests paused
Press [r] to resume testing, [o] Toggle test output, [h] for more options></code>
			</pre></div>
		</div>
		<div class="divinfo">
			<h4>7. Tester l'application</h4>
			Lancer un deuxième "Terminal" pour la partie client puis tester les deux URL suivantes :</br>
			<div class="divcode"><pre>
				<code class="language-bash">start chrome http://localhost:8080 => "our new Cloud-Native application is ready!"
start chrome http://localhost:8080/hello => Hello RESTEasy</code>
			</pre></div>
		</div>
		<div class="divinfo">
			<h4>8. Packager son application</h4>
			<h5>8.1 "Petit" jar avec dépendances dans ./target/quarkus-app</h5>
			- Quitter le serveur : q
			- Packager en jar
			<div class="divcode"><pre>
				<code class="language-bash">PS> cd $home/DEV/Quarkus/Projets/quarkus-start-with-quarkus-io
PS> ./mvnw clean package
[INFO] Scanning for projects...
[INFO] 
[INFO] --------------- edu.tuto:quarkus-start-with-quarkus-io ---------------
[INFO] Building quarkus-start-with-quarkus-io 1.0.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ quarkus-start-with-quarkus-io ---
[INFO] Deleting C:\Users\userName\DEV\Quarkus\Projets\quarkus-start-with-quarkus-io\target
[INFO] 
[INFO] --- quarkus-maven-plugin:2.1.1.Final:generate-code (default) @ quarkus-start-with-quarkus-io ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ quarkus-start-with-quarkus-io ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ quarkus-start-with-quarkus-io ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 1 source file to C:\Users\userName\DEV\Quarkus\Projets\quarkus-start-with-quarkus-io\target\classes
[INFO] 
[INFO] --- quarkus-maven-plugin:2.1.1.Final:generate-code-tests (default) @ quarkus-start-with-quarkus-io ---
[INFO]
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ quarkus-start-with-quarkus-io ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.      
[INFO] skip non existing resourceDirectory C:\Users\userName\DEV\Quarkus\Projets\quarkus-start-with-quarkus-io\src\test\resources
[INFO]
[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ quarkus-start-with-quarkus-io ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 2 source files to C:\Users\userName\DEV\Quarkus\Projets\quarkus-start-with-quarkus-io\target\test-classes   
[INFO] 
[INFO] --- maven-surefire-plugin:3.0.0-M5:test (default-test) @ quarkus-start-with-quarkus-io ---
[INFO] 
[INFO] ------------------------------------------------------- 
[INFO]  T E S T S
[INFO] ------------------------------------------------------- 
[INFO] Running edu.tuto.GreetingResourceTest
2021-08-10 17:41:07,940 INFO  [io.quarkus] (main) Quarkus 2.1.1.Final on JVM started in 5.461s. Listening on: http://localhost:8081
2021-08-10 17:41:07,942 INFO  [io.quarkus] (main) Profile test 
activated.
2021-08-10 17:41:07,942 INFO  [io.quarkus] (main) Installed features: [cdi, resteasy, smallrye-context-propagation]
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 13.328 s - in edu.tuto.GreetingResourceTest
2021-08-10 17:41:10,239 INFO  [io.quarkus] (main) Quarkus stopped in 0.061s
[INFO] 
[INFO] Results:
[INFO]
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0        
[INFO]
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ quarkus-start-with-quarkus-io ---
[INFO] Building jar: C:\Users\userName\DEV\Quarkus\Projets\quarkus-start-with-quarkus-io\target\quarkus-start-with-quarkus-io-1.0.0-SNAPSHOT.jar
[INFO] 
[INFO] --- quarkus-maven-plugin:2.1.1.Final:build (default) @ quarkus-start-with-quarkus-io ---
[INFO] [org.jboss.threads] JBoss Threads version 3.4.0.Final
[INFO] [io.quarkus.deployment.QuarkusAugmentor] Quarkus augmentation completed in 3045ms
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  26.871 s
[INFO] Finished at: 2021-08-10T17:41:14+02:00
[INFO] ------------------------------------------------------------------------</code>
			</pre></div>
		<hr>
			- Vérifier la présence du "petit" jar avec dépendances : quarkus-start-with-quarkus-io-1.0.0-SNAPSHOT.jar
			<div class="divcode"><pre>
				<code class="language-bash">PS> ls ./target/*.jar
    Répertoire:
    C:\Users\userName\DEV\Quarkus\Projets\quarkus-start-with-quarkus-io\target

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a----        10/08/2021     17:41           4974 quarkus-start-with-quarkus-io-1.0.0-SNAPSHOT.jar</code>
			</pre></div>
			<hr>
			<h5>8.2 uber-jar sans dépendance</h5>
			- Quitter le serveur : q</br>
			- Packager en uber-jar</br>
			- Editer le fichier : application.properties</br>
			- Ajouter la ligne : quarkus.package.type=uber-jar</br>
			<div class="divcode"><pre>
			<code class="language-bash">PS> cd $home/DEV/Quarkus/Projets/quarkus-start-with-quarkus-io
PS> ./mvnw package
[INFO] Scanning for projects...
[INFO] 
[INFO] --------------- edu.tuto:quarkus-start-with-quarkus-io ---------------
[INFO] Building quarkus-start-with-quarkus-io 1.0.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- quarkus-maven-plugin:2.1.1.Final:generate-code (default) @ quarkus-start-with-quarkus-io ---  
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ quarkus-start-with-quarkus-io ---  
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ quarkus-start-with-quarkus-io ---     
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- quarkus-maven-plugin:2.1.1.Final:generate-code-tests (default) @ quarkus-start-with-quarkus-io ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ quarkus-start-with-quarkus-io ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\Users\frup44339\DEV\Quarkus\Projets\quarkus-start-with-quarkus-io\src\test\resources
[INFO]
[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ quarkus-start-with-quarkus-io 
---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- maven-surefire-plugin:3.0.0-M5:test (default-test) @ quarkus-start-with-quarkus-io ---
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running edu.tuto.GreetingResourceTest
2021-08-10 19:05:46,235 INFO  [io.quarkus] (main) Quarkus 2.1.1.Final on JVM started in 4.369s. Listening on: http://localhost:8081
2021-08-10 19:05:46,235 INFO  [io.quarkus] (main) Profile test activated. 
2021-08-10 19:05:46,235 INFO  [io.quarkus] (main) Installed features: [cdi, resteasy, smallrye-context-propagation]
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 7.829 s - in edu.tuto.GreetingResourceTest
2021-08-10 19:05:47,917 INFO  [io.quarkus] (main) Quarkus stopped in 0.033s
[INFO] 
[INFO] Results:
[INFO]
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO]
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ quarkus-start-with-quarkus-io ---
[INFO] Building jar: C:\Users\frup44339\DEV\Quarkus\Projets\quarkus-start-with-quarkus-io\target\quarkus-start-with-quarkus-io-1.0.0-SNAPSHOT.jar
[INFO] 
[INFO] --- quarkus-maven-plugin:2.1.1.Final:build (default) @ quarkus-start-with-quarkus-io ---
[INFO] [org.jboss.threads] JBoss Threads version 3.4.0.Final
[INFO] [io.quarkus.deployment.pkg.steps.JarResultBuildStep] Building fat jar: C:\Users\frup44339\DEV\Quarkus\Projets\quarkus-start-with-quarkus-io\target\quarkus-start-with-quarkus-io-1.0.0-SNAPSHOT-runner.jar 
[WARNING] [io.quarkus.deployment.pkg.steps.JarResultBuildStep] Dependencies with duplicate files detected. The dependencies [com.sun.activation:jakarta.activation::jar:1.2.1(compile), jakarta.activation:jakarta.activation-api::jar:1.2.1(compile)] contain duplicate files, e.g. javax/activation/SecuritySupport.class[INFO] [io.quarkus.deployment.QuarkusAugmentor] Quarkus augmentation completed in 5736ms
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  19.937 s
[INFO] Finished at: 2021-08-10T19:05:54+02:00
[INFO] ------------------------------------------------------------------------</code>
			</pre></div>
		<hr>
			- Vérifier la présence du uber-jar sans dépendance : quarkus-start-with-quarkus-io-1.0.0-SNAPSHOT-runner.jar
			<div class="divcode"><pre>
				<code class="language-bash">PS> ls ./target/*.jar
    Répertoire:
    C:\Users\userName\DEV\Quarkus\Projets\quarkus-start-with-quarkus-io\target

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a----        10/08/2021     19:05       12222912 quarkus-start-with-quarkus-io-1.0.0-SNAPSHOT-runner.jar</code>
			</pre></div>
			<hr>
			<h5>8.2 native-jar à finir</h5>
		</div>
		<div class="divinfo">
			<h4>10. Gestion de configuration de la page html courante (Pour info)</h4>
			<div class="divcode"><pre>
				<code class="language-bash">cd $home/DEV/wikiDevOps
git remote add origin https://github.com/MonLoggin/wikiDevOps.git
git add .\2_dev\frameworks\BackEnd\Quarkus\index_Quarkus.html
git add .\2_dev\frameworks\BackEnd\Quarkus\Quarkus_StartWithQuarkusIO.html
git status
git commit -m "Nouveaux fichiers"
git push -u origin main
git diff main origin/main</code>
			</pre></div>
		</div>
	</body>
</html>